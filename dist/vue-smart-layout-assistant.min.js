/*!
 * vue-smart-layout-assistant v1.0.0
 * (c) 2018-present phphe <phphe@outlook.com>
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vueSmartLayoutAssistant={})}(this,function(t){"use strict";var e;try{e=global}catch(t){e=window}function i(t){return t[t.length-1]}function r(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent&&t.attachEvent("on".concat(e),i)}function n(t){return{storage:t,set:function(t,e,i){null==e?this.storage.removeItem(t):this.storage.setItem(t,JSON.stringify({value:e,expired_at:i&&(new Date).getTime()/1e3+60*i}))},get:function(t){var e=this.storage.getItem(t);if(e){if(!(e=JSON.parse(e)).expired_at||e.expired_at>(new Date).getTime())return e.value;this.storage.removeItem(t)}return null},clear:function(){this.storage.clear()}}}n(e.localStorage),n(e.sessionStorage);var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-row"},[e("div",{ref:"inner",staticClass:"layout-row-inner"},[this._t("default"),e("div",{staticClass:"clearfix"})],2)])},staticRenderFns:[],props:{gutter:{default:16,type:[Number,Array]}},data:function(){return{mounted:!1,width:null,gutterX:null,gutterY:null,colsMapping:{}}},computed:{colStyle:function(){return{marginRight:this.gutterX+"px",marginBottom:this.gutterY+"px"}}},methods:{updateWidth:function(){this.width=this.$el.offsetWidth},updateGutter:function(){var t,e=this.gutter,i=(t=e,"[object Array]"===Object.prototype.toString.call(t)?e:[e,e]);this.gutterX=i[0],this.gutterY=i[1]},getColCurrentPropWidth:function(t){var e=window.innerWidth,r=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++){var s=e[n];if(null!=s)return s}return i(e)};return e<768?r(t.xs,t.width):e<992?r(t.sm,t.width):e<1200?r(t.md,t.sm,t.width):r(t.lg,t.md,t.sm,t.width)},update:function(){var t=this;if(this.mounted){var e,r,n=this.width+this.gutterX,s=[],a={};if(this.$refs.inner){var o=!0,u=!1,h=void 0;try{for(var d,l=function(){var i=d.value;if("BR"===i.tagName)return e=null,"continue";if(!function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}(i,"layout-col"))return"continue";e||(e=[],s.push(e),r=0);var o=i.getAttribute("data-vm-id"),u=t.colsMapping[o];u.isFirstCol=!1,u.isLastCol=!1,u.isLastRow=!1;var h=void 0,l=function(e,i){i<1?(h=n*i,e.cssWidth=h-t.gutterX):(h=i+t.gutterX,e.cssWidth=i)};if(u.sameWidth)if(a[u.sameWidth]){var c=a[u.sameWidth];c.push(u),l(u,c[0].cssWidth)}else a[u.sameWidth]=[u],l(u,t.getColCurrentPropWidth(u));else l(u,t.getColCurrentPropWidth(u));u._realWidth=h,(r+=h)>n?(e=[u],s.push(e),r=h):e.push(u)},c=this.$refs.inner.children[Symbol.iterator]();!(o=(d=c.next()).done);o=!0)l()}catch(t){u=!0,h=t}finally{try{o||null==c.return||c.return()}finally{if(u)throw h}}if(0!==s.length){0===s[0].length&&s.shift();for(var f=function(){var t=s[g];t[0].isFirstCol=!0,i(t).isLastCol=!0;var e=n,r=[];if(t.forEach(function(t,i){t.fixed||t.sameWidth||(r.push(t),t._colIndex=i),e-=t._realWidth}),e<=0)return"continue";r.sort(function(t,e){var i=t.grow||0,r=e.grow||0;return i==r?-(t._colIndex-e._colIndex):i-r}),r.reverse();for(var o={},u=0;u<r.length;u++){var h=r[u];if(h.sameWidth){var d=h.sameWidth;if(o[d])continue;o[d]=!0;var l=a[d],c=e/l.length,f=!0,p=!1,m=void 0;try{for(var v,w=l[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.cssWidth+=c,y._realWidth+=c}}catch(t){p=!0,m=t}finally{try{f||null==w.return||w.return()}finally{if(p)throw m}}break}h.cssWidth+=e,h._realWidth+=e;break}},g=0;g<s.length;g++)f();i(s).forEach(function(t){t.isLastRow=!0})}}}},registerCol:function(t){this.colsMapping[t._uid]=t,this.update()},unregisterCol:function(t){delete this.colsMapping[t._uid],this.update()}},mounted:function(){this.mounted=!0,this.updateWidth(),r(window,"resize",this.updateWidth),this.$watch("gutter",this.updateGutter,{deep:!0,immediate:!0}),this.$watch("gutterX",this.update),this.$watch("gutterY",this.update),this.$watch("width",this.update),this.update()},beforeDestroy:function(){var t,e,i;t=window,e="resize",i=this.updateWidth,t.removeEventListener?t.removeEventListener(e,i):t.detachEvent&&t.detachEvent("on".concat(e),i)}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"layout-col",style:[this.$parent.colStyle,this.colStyle],attrs:{"data-vm-id":this.vmId}},[this._t("default")],2)},staticRenderFns:[],props:{width:{default:.1,type:Number},fixed:{default:!1},grow:{},sameWidth:{},xs:{type:Number},sm:{type:Number},md:{type:Number},lg:{type:Number}},components:{},data:function(){return{vmId:this._uid,cssWidth:null,isFirstCol:!1,isLastCol:!1,isLastRow:!1}},computed:{colStyle:function(){var t={width:this.cssWidth+"px"};return this.isFirstCol&&(t.clear="both"),this.isLastCol&&(t.marginRight="0"),this.isLastRow&&(t.marginBottom="0"),t}},mounted:function(){this.$parent.registerCol(this)},beforeDestroy:function(){this.$parent.unregisterCol(this)}};t.Row=s,t.Col=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vue-smart-layout-assistant.min.js.map
