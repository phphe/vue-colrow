/*!
 * vue-smart-layout-assistant v1.0.3
 * (c) 2018-present phphe <phphe@outlook.com>
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vueSmartLayoutAssistant={})}(this,function(t){"use strict";var e;try{e=global}catch(t){e=window}function i(t){return t[t.length-1]}function r(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent&&t.attachEvent("on".concat(e),i)}function n(t){return{storage:t,set:function(t,e,i){null==e?this.storage.removeItem(t):this.storage.setItem(t,JSON.stringify({value:e,expired_at:i&&(new Date).getTime()/1e3+60*i}))},get:function(t){var e=this.storage.getItem(t);if(e){if(!(e=JSON.parse(e)).expired_at||e.expired_at>(new Date).getTime())return e.value;this.storage.removeItem(t)}return null},clear:function(){this.storage.clear()}}}n(e.localStorage),n(e.sessionStorage);function s(t,e){return""===t[e]||t[e]}var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-row"},[e("div",{ref:"inner",staticClass:"layout-row-inner"},[this._t("default"),e("div",{staticClass:"clearfix"})],2)])},staticRenderFns:[],props:{gutter:{default:16,type:[Number,Array]}},data:function(){return{mounted:!1,width:null,gutterX:null,gutterY:null,colsMapping:{}}},computed:{colStyle:function(){return{marginRight:this.gutterX+"px",marginBottom:this.gutterY+"px"}}},methods:{updateWidth:function(){this.width=this.$el.offsetWidth},updateGutter:function(){var t,e=this.gutter,i=(t=e,"[object Array]"===Object.prototype.toString.call(t)?e:[e,e]);this.gutterX=i[0],this.gutterY=i[1]},getColCurrentPropWidth:function(t){var e=window.innerWidth,r=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n++){var s=e[n];if(null!=s)return s}return i(e)};return e<768?r(t.xs,t.width):e<992?r(t.sm,t.width):e<1200?r(t.md,t.sm,t.width):r(t.lg,t.md,t.sm,t.width)},update:function(){var t=this;if(this.mounted){var e,r,n=this.width+this.gutterX,a=[],o={};if(this.$refs.inner){var u=!0,h=!1,d=void 0;try{for(var l,c=function(){var i=l.value;if("BR"===i.tagName)return e=null,"continue";if(!function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}(i,"layout-col"))return"continue";e||(e=[],a.push(e),r=0);var u=i.getAttribute("data-vm-id"),h=t.colsMapping[u];h.isFirstCol=!1,h.isLastCol=!1,h.isLastRow=!1;var d=void 0,c=function(e,i){i<1?(d=n*i,e.cssWidth=d-t.gutterX):(d=i+t.gutterX,e.cssWidth=i)};if(s(h,"sameWidth"))if(o[h.sameWidth]){var f=o[h.sameWidth];f.push(h),c(h,f[0].cssWidth)}else o[h.sameWidth]=[h],c(h,t.getColCurrentPropWidth(h));else c(h,t.getColCurrentPropWidth(h));h._realWidth=d,(r+=d)>n?(e=[h],a.push(e),r=d):e.push(h)},f=this.$refs.inner.children[Symbol.iterator]();!(u=(l=f.next()).done);u=!0)c()}catch(t){h=!0,d=t}finally{try{u||null==f.return||f.return()}finally{if(h)throw d}}if(0!==a.length){0===a[0].length&&a.shift();for(var g=function(){var t=a[p];t[0].isFirstCol=!0,i(t).isLastCol=!0;var e=n,r=[];if(t.forEach(function(t,i){s(t,"fixed")||s(t,"sameWidth")||(r.push(t),t._colIndex=i),e-=t._realWidth}),e<=0)return"continue";r.sort(function(t,e){var i=t.grow||0,r=e.grow||0;return i==r?-(t._colIndex-e._colIndex):i-r}),r.reverse();for(var u={},h=0;h<r.length;h++){var d=r[h];if(s(d,"sameWidth")){var l=d.sameWidth;if(u[l])continue;u[l]=!0;var c=o[l],f=e/c.length,g=!0,m=!1,v=void 0;try{for(var w,y=c[Symbol.iterator]();!(g=(w=y.next()).done);g=!0){var W=w.value;W.cssWidth+=f,W._realWidth+=f}}catch(t){m=!0,v=t}finally{try{g||null==y.return||y.return()}finally{if(m)throw v}}break}d.cssWidth+=e,d._realWidth+=e;break}},p=0;p<a.length;p++)g();i(a).forEach(function(t){t.isLastRow=!0})}}}},registerCol:function(t){this.colsMapping[t._uid]=t,this.update()},unregisterCol:function(t){delete this.colsMapping[t._uid],this.update()}},mounted:function(){this.mounted=!0,this.updateWidth(),r(window,"resize",this.updateWidth),this.$watch("gutter",this.updateGutter,{deep:!0,immediate:!0}),this.$watch("gutterX",this.update),this.$watch("gutterY",this.update),this.$watch("width",this.update),this.update()},beforeDestroy:function(){var t,e,i;t=window,e="resize",i=this.updateWidth,t.removeEventListener?t.removeEventListener(e,i):t.detachEvent&&t.detachEvent("on".concat(e),i)}},o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"layout-col",style:[this.$parent.colStyle,this.colStyle],attrs:{"data-vm-id":this.vmId}},[this._t("default")],2)},staticRenderFns:[],props:{width:{default:.1,type:Number},fixed:{default:!1},grow:{},sameWidth:{},xs:{type:Number},sm:{type:Number},md:{type:Number},lg:{type:Number}},components:{},data:function(){return{vmId:this._uid,cssWidth:null,isFirstCol:!1,isLastCol:!1,isLastRow:!1}},computed:{colStyle:function(){var t={width:this.cssWidth+"px"};return this.isFirstCol&&(t.clear="both"),this.isLastCol&&(t.marginRight="0"),this.isLastRow&&(t.marginBottom="0"),t}},mounted:function(){this.$parent.registerCol(this)},beforeDestroy:function(){this.$parent.unregisterCol(this)}};t.Row=a,t.Col=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vue-smart-layout-assistant.min.js.map
